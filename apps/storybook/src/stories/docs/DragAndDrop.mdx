import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Drag and Drop/IntroducciÃ³n" />

# Drag and Drop

Sistema completo de componentes arrastrables para interfaces interactivas. Implementado con `@dnd-kit`, una librerÃ­a moderna, accesible y performante.

## Componentes Disponibles

### ðŸ”¢ SortableList

Lista de elementos reordenables mediante drag and drop.

**Casos de uso:**
- PriorizaciÃ³n de tareas
- Reordenamiento de categorÃ­as
- ConfiguraciÃ³n de orden de visualizaciÃ³n
- GestiÃ³n de playlist o galleries

**CaracterÃ­sticas:**
- âœ… Animaciones fluidas
- âœ… Feedback visual durante el arrastre
- âœ… Manija de arrastre opcional
- âœ… Soporte para contenido rico (iconos, badges, etc.)
- âœ… Accesible con teclado

---

### ðŸ“Ž FileDropzone

Zona de arrastrar y soltar archivos con validaciÃ³n y preview.

**Casos de uso:**
- Upload de documentos
- GestiÃ³n de imÃ¡genes
- Carga masiva de archivos
- ImportaciÃ³n de datos

**CaracterÃ­sticas:**
- âœ… Drag and drop visual
- âœ… Click para seleccionar archivos
- âœ… Vista previa de imÃ¡genes
- âœ… ValidaciÃ³n de tipo y tamaÃ±o
- âœ… LÃ­mite de archivos configurable
- âœ… Feedback de errores claro

**Validaciones:**
- Tipo de archivo (accept)
- TamaÃ±o mÃ¡ximo por archivo
- Cantidad mÃ¡xima de archivos

---

### ðŸ“‹ KanbanBoard

Tablero estilo Trello/Kanban con columnas y tarjetas arrastrables.

**Casos de uso:**
- GestiÃ³n de proyectos
- Pipeline de ventas
- Workflow de desarrollo
- Seguimiento de tickets

**CaracterÃ­sticas:**
- âœ… MÃºltiples columnas configurables
- âœ… Arrastrar tarjetas entre columnas
- âœ… Colores personalizables por columna
- âœ… LÃ­mite de tarjetas por columna
- âœ… Badges de estado
- âœ… Metadata customizable
- âœ… Callback on card move

**Estructura de datos:**
```typescript
interface KanbanColumn {
  id: string;
  title: string;
  cards: KanbanCard[];
  color?: string;        // Color de identificaciÃ³n
  maxCards?: number;     // LÃ­mite de tarjetas
}

interface KanbanCard {
  id: string;
  title: string;
  description?: string;
  metadata?: React.ReactNode;
  badge?: {
    text: string;
    variant: 'primary' | 'success' | 'warning' | 'error' | 'neutral';
  };
}
```

---

### ðŸŽ´ DraggableCard

Tarjeta arrastrable simple para implementaciones personalizadas.

**Casos de uso:**
- Dashboard widgets arrastrables
- DiseÃ±adores de interfaces
- OrganizaciÃ³n de contenido
- Gamification

**CaracterÃ­sticas:**
- âœ… Componente de bajo nivel
- âœ… Completamente personalizable
- âœ… Feedback visual automÃ¡tico
- âœ… Data customizable
- âœ… Compatible con useDroppable

---

## GuÃ­a de Uso

### InstalaciÃ³n

Los componentes ya estÃ¡n incluidos en `@omnitok/ui`:

```bash
npm install @omnitok/ui @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities
```

### Import

```typescript
import {
  SortableList,
  FileDropzone,
  KanbanBoard,
  DraggableCard
} from '@omnitok/ui';
```

### Ejemplo BÃ¡sico - SortableList

```tsx
import { SortableList, SortableListItem } from '@omnitok/ui';
import { useState } from 'react';

function MyComponent() {
  const [items, setItems] = useState<SortableListItem[]>([
    { id: '1', content: 'Primer item' },
    { id: '2', content: 'Segundo item' },
    { id: '3', content: 'Tercer item' },
  ]);

  return (
    <SortableList
      items={items}
      onReorder={setItems}
      showHandle
    />
  );
}
```

### Ejemplo BÃ¡sico - FileDropzone

```tsx
import { FileDropzone } from '@omnitok/ui';

function MyComponent() {
  return (
    <FileDropzone
      accept="image/*"
      maxFiles={5}
      maxSize={10 * 1024 * 1024} // 10MB
      onFilesAdded={(files) => {
        console.log('Archivos subidos:', files);
      }}
      showPreview
    />
  );
}
```

### Ejemplo BÃ¡sico - KanbanBoard

```tsx
import { KanbanBoard, KanbanColumn } from '@omnitok/ui';
import { useState } from 'react';

function MyComponent() {
  const [columns, setColumns] = useState<KanbanColumn[]>([
    {
      id: 'todo',
      title: 'Por Hacer',
      cards: [
        { id: '1', title: 'Tarea 1' },
        { id: '2', title: 'Tarea 2' },
      ],
    },
    {
      id: 'doing',
      title: 'En Progreso',
      cards: [],
    },
  ]);

  return (
    <KanbanBoard
      columns={columns}
      onCardMove={(cardId, from, to) => {
        console.log(`Card ${cardId} moved from ${from} to ${to}`);
      }}
    />
  );
}
```

---

## Efectos Visuales

Todos los componentes incluyen efectos visuales cuidadosamente diseÃ±ados:

### Durante el arrastre:
- ðŸŽ¨ **Opacidad reducida** del elemento original
- ðŸŽ¨ **Shadow elevado** del overlay
- ðŸŽ¨ **Borde resaltado** con color primario
- ðŸŽ¨ **Escala suave** del elemento activo
- ðŸŽ¨ **Cursor** cambia a grab/grabbing

### En hover:
- ðŸŽ¨ **Borde de color primario**
- ðŸŽ¨ **Shadow suave**
- ðŸŽ¨ **Transiciones fluidas** (200ms)

### Feedback de estado:
- âœ… **Zona activa** - fondo azul suave
- âœ… **Zona vÃ¡lida** - borde verde
- âœ… **Zona invÃ¡lida** - borde rojo
- âœ… **Elemento bloqueado** - cursor not-allowed

---

## Accesibilidad

Todos los componentes son accesibles:

- â™¿ **NavegaciÃ³n por teclado** completa
- â™¿ **Screen reader** compatible
- â™¿ **ARIA labels** apropiados
- â™¿ **Focus indicators** visibles
- â™¿ **Semantic HTML**

### Atajos de teclado (SortableList):
- `Space` / `Enter` - Activar arrastre
- `Arrow Keys` - Mover elemento
- `Escape` - Cancelar

---

## Performance

Optimizaciones incluidas:

- âš¡ **Virtual DOM eficiente** con React
- âš¡ **Animaciones CSS** nativas
- âš¡ **Debounce** en eventos
- âš¡ **Lazy calculations**
- âš¡ **Memoization** de componentes pesados

---

## PersonalizaciÃ³n

Todos los componentes aceptan:

- `className` - Clases CSS personalizadas
- `style` - Estilos inline
- Variantes de Tailwind para colores
- Props especÃ­ficas por componente

### Ejemplo de CustomizaciÃ³n

```tsx
<SortableList
  items={items}
  className="max-w-2xl mx-auto"
  itemClassName="bg-gradient-to-r from-primary-50 to-primary-100"
  showHandle={false}
/>
```

---

## Recursos

- [DocumentaciÃ³n @dnd-kit](https://docs.dndkit.com/)
- [Ejemplos en Storybook](/?path=/story/drag-and-drop-sortablelist--default)
- [GitHub Omnitok UI](https://github.com/pervasivemind/omnitok-ui-kit)
